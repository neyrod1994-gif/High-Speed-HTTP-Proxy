name: HTTP Injector Server

on:
  workflow_dispatch:

jobs:
  http-injector:
    runs-on: windows-latest
    timeout-minutes: 15

    steps:
    - name: Setup Environment
      run: |
        Write-Host "ðŸš€ Iniciando HTTP Injector Server..."
        Write-Host "Este es un servidor de prueba"
        Write-Host "Workflow ejecutÃ¡ndose correctamente!"
        
    - name: Show Success Message
      run: |
        Write-Host "ðŸŽ‰ Â¡Ã‰XITO!"
        Write-Host "El workflow se estÃ¡ ejecutando"
        Write-Host "Ahora puedes agregar Tailscale y el servidor"
        
    - name: Keep Alive
      run: |
        $startTime = Get-Date
        $endTime = $startTime.AddMinutes(2)
        
        while ((Get-Date) -lt $endTime) {
            $remaining = $endTime - (Get-Date)
            $seconds = [math]::Round($remaining.TotalSeconds)
            Write-Host "Servidor activo - Tiempo restante: $seconds segundos"
            Start-Sleep -Seconds 10
        }
        Write-Host "ðŸ›‘ Workflow completado"
